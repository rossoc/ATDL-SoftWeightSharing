---
title: 27/10
layout: page
author: Carlo Rosso
date: 2025-10-27
---

Let's work together.
I want to rewrite the whole package in . to implement it following software
engineer practices.
The modules should all be in `src` without any other folder.

Note that I use uv and therefore any command is to be run with `uv run`.
I don't have `python` installed (only work through uv).
After a file has been implemented you shall check that it works appropriately
writing the opportune tests in the folder `tests`, using the utility pytest.

Let's start with the file data.py. Let's rewrite the whole code in smaller
function to minimize the amount of code that is written. Notably the variable
must be meaningful and therefore I don't care about the the length of the
names, I want simple functions with intuitive name to tackle the problem.
Secondly I want to maintain the same interface, therefore the four functions
make_loaders, get_mnist_data(), get_cifar_data() should still be defined

---

I already implemented the pretraining and the training. Now I want some
visualization of the training and post training.
Taking inspiration from sws , can you implement some gif visualizer as is it
implemented in viz ? Moreover update the retraining procedure to accept it.
Secondly, store the same data during the training that are store by the
implementation of the retraining procedure.

---

You did an amazing job. Now let's leverage the last details. Considering the file @sws/run_sws.py when the file run then the arguments given to it in input are stored in a file, implement one function for this to store the arguments provided to `retraining()`. Outside of retraining, 2. implement a function to store the current environment. 3. one for layer_pruning and another for summery_metrics. I think that also all the plot programs in @sws/ are very interesting for each of them implement an equivalent function. All these function are to be implemented inside @src/atdl_sws/ in a file called `metrics.py`, in such file there shall be a class where the methods are the functions that I've described. Finally implement a method store(dir_name) that execute all the other methods and store the results in the `save_dir` folder, a param of the class



uv run scripts/retrain_v2.py \
    --model cifar10 \
    --epochs 40 \
    --batch-size 64 \
    --save-dir runs/lenet5_mixture_init_neg_sigma \
    --prior-J 17 \
    --visualize \
    --framerate 2 \
    --log \
    --tau 0.0013633647183120068 \
    --lr-w 0.0005580959150991871 \
    --lr-mu 0.00014398190435688154 \
    --lr-sigma 0.0013795402040204172 \
    --lr-pi 0.0019158219548093154 \
    --prior-pi0 0.9923624358230701 \
    --prior-init-sigma -10 \
    --prior-gamma-alpha 80167.722337604922 \
    --prior-gamma-beta 27.8320003468984571 \
    --prior-gamma-alpha0 42811.34773401911 \
    --prior-gamma-beta0 13.663305400592971

python scripts/tune_optuna.py --model lenet5 --n-trials 50 --epochs 40 --save-dir runs/bo_lenet5_l1_reg --visualize --log

python scripts/tune_optuna.py --model cifar10 --n-trials 20 --epochs 40 --save-dir runs/bo_cifar10_init --visualize --log

